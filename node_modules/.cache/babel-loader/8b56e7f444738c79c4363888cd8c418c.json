{"ast":null,"code":"import _classCallCheck from \"/Users/athom/Desktop/codingProjects/theJackProject/jackFront/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/athom/Desktop/codingProjects/theJackProject/jackFront/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/athom/Desktop/codingProjects/theJackProject/jackFront/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/athom/Desktop/codingProjects/theJackProject/jackFront/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/athom/Desktop/codingProjects/theJackProject/jackFront/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/athom/Desktop/codingProjects/theJackProject/jackFront/src/Pages/Registration.js\";\nimport React, { Component } from 'react';\nimport AuthService from '../services';\nimport { Form, FormGroup, Col, FormControl, Button, ControlLabel, Checkbox } from 'react-bootstrap';\n\nvar Registration =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Registration, _Component);\n\n  function Registration(props) {\n    var _this;\n\n    _classCallCheck(this, Registration);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Registration).call(this, props));\n\n    _this.handleUserChange = function (e) {\n      var form = _this.state.form;\n      form.user[e.target.name] = e.target.value;\n\n      _this.setState({\n        form: form\n      });\n    };\n\n    _this.handleProfileChange = function (e) {\n      var form = _this.state.form;\n      form.user.profile_attributes[e.target.name] = e.target.value;\n\n      _this.setState({\n        form: form\n      });\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var form = _this.state.form;\n      form.user.profile_attributes.phone = '+1' + form.user.profile_attributes.phone;\n\n      _this.auth.register(form).then(function (status) {\n        if (status.errors) {\n          _this.setState({\n            errors: status.errors\n          });\n        } else {\n          _this.auth.sign_in(form);\n\n          _this.props.refresh();\n        }\n      });\n    };\n\n    _this.handleOwnershipChoice = function (type) {\n      var form = _this.state.form;\n\n      switch (type) {\n        case \"home\":\n          form.user.profile_attributes.home_owner = !form.user.profile_attributes.home_owner;\n          break;\n\n        case \"car\":\n          form.user.profile_attributes.car_owner = !form.user.profile_attributes.car_owner;\n          break;\n\n        case \"pet\":\n          form.user.profile_attributes.pet_owner = !form.user.profile_attributes.pet_owner;\n      }\n\n      _this.setState({\n        form: form\n      });\n    };\n\n    _this.isValid = function () {\n      var _this$state = _this.state,\n          email = _this$state.email,\n          password = _this$state.password,\n          profile_attributes = _this$state.profile_attributes;\n      return email === /\\A[^@\\s]+@[^@\\s]+\\z/ && password !== 0 && password < 6 && profile_attributes.first_name !== \"\" && profile_attributes.last_name !== \"\" && profile_attributes.phone === /(^\\+[0-9]{2}|^\\+[0-9]{2}\\(0\\)|^\\(\\+[0-9]{2}\\)\\(0\\)|^00[0-9]{2}|^0)([0-9]{9}$|[0-9\\-\\s]{10}$)/;\n    };\n\n    _this.auth = new AuthService();\n    _this.state = {\n      errors: {},\n      form: {\n        user: {\n          email: '',\n          password: '',\n          profile_attributes: {\n            first_name: '',\n            last_name: '',\n            phone: '',\n            home_owner: false,\n            car_owner: false,\n            pet_owner: false\n          }\n        }\n      }\n    };\n    return _this;\n  }\n\n  _createClass(Registration, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(this.state);\n      var _this$state$form$user = this.state.form.user,\n          email = _this$state$form$user.email,\n          password = _this$state$form$user.password,\n          profile_attributes = _this$state$form$user.profile_attributes;\n      var errorMsgs = [];\n\n      if (Object.keys(this.state.errors).length > 0) {\n        Object.entries(this.state.errors).forEach(function (entry) {\n          var key = entry[0];\n          var value = entry[1];\n          errorMsgs.push(\"\".concat(key, \" \").concat(value, \".\"));\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"greeting\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, \"Register:\"), React.createElement(\"h3\", {\n        className: \"errors\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, errorMsgs[0]), React.createElement(Form, {\n        horizontal: true,\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        controlId: \"formHorizontalEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, React.createElement(Col, {\n        componentClass: ControlLabel,\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, \"Email:\"), React.createElement(Col, {\n        sm: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        onChange: this.handleUserChange,\n        name: \"email\",\n        value: email,\n        type: \"email\",\n        placeholder: \"Email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        controlId: \"formHorizontalPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(Col, {\n        componentClass: ControlLabel,\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, \"Password:\"), React.createElement(Col, {\n        sm: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        onChange: this.handleUserChange,\n        name: \"password\",\n        value: password,\n        type: \"password\",\n        placeholder: \"Password\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        controlId: \"formHorizontalFirstName\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(Col, {\n        componentClass: ControlLabel,\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"First Name:\"), React.createElement(Col, {\n        sm: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        onChange: this.handleProfileChange,\n        name: \"first_name\",\n        value: profile_attributes.first_name,\n        type: \"FirstName\",\n        placeholder: \"First Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        controlId: \"formHorizontalLastName\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(Col, {\n        componentClass: ControlLabel,\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \"Last Name:\"), React.createElement(Col, {\n        sm: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        onChange: this.handleProfileChange,\n        name: \"last_name\",\n        value: profile_attributes.last_name,\n        type: \"LastName\",\n        placeholder: \"Last Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        controlId: \"formHorizontalPhone\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(Col, {\n        componentClass: ControlLabel,\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Phone:\"), React.createElement(Col, {\n        sm: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        onChange: this.handleProfileChange,\n        name: \"phone\",\n        value: profile_attributes.phone,\n        type: \"phone\",\n        placeholder: \"555-555-5555\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        className: \"ownership\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"I have a (check all that apply)...\"), React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(Checkbox, {\n        onChange: function onChange() {\n          return _this2.handleOwnershipChoice(\"home\");\n        },\n        inline: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Home\"), React.createElement(Checkbox, {\n        onChange: function onChange() {\n          return _this2.handleOwnershipChoice(\"car\");\n        },\n        inline: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Car\"), React.createElement(Checkbox, {\n        onChange: function onChange() {\n          return _this2.handleOwnershipChoice(\"pet\");\n        },\n        inline: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"Pet\"))), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(Col, {\n        smOffset: 2,\n        sm: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Register\")))));\n    }\n  }]);\n\n  return Registration;\n}(Component);\n\nexport default Registration;","map":{"version":3,"sources":["/Users/athom/Desktop/codingProjects/theJackProject/jackFront/src/Pages/Registration.js"],"names":["React","Component","AuthService","Form","FormGroup","Col","FormControl","Button","ControlLabel","Checkbox","Registration","props","handleUserChange","e","form","state","user","target","name","value","setState","handleProfileChange","profile_attributes","handleSubmit","preventDefault","phone","auth","register","then","status","errors","sign_in","refresh","handleOwnershipChoice","type","home_owner","car_owner","pet_owner","isValid","email","password","first_name","last_name","console","log","errorMsgs","Object","keys","length","entries","forEach","entry","key","push"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,WAAP,MAAwB,aAAxB;AACA,SAASC,IAAT,EAAeC,SAAf,EAA0BC,GAA1B,EAA+BC,WAA/B,EAA4CC,MAA5C,EAAoDC,YAApD,EAAkEC,QAAlE,QAAkF,iBAAlF;;IAEMC,Y;;;;;AACJ,wBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,sFAAMA,KAAN;;AADiB,UAqGnBC,gBArGmB,GAqGA,UAACC,CAAD,EAAO;AAAA,UAClBC,IADkB,GACT,MAAKC,KADI,CAClBD,IADkB;AAExBA,MAAAA,IAAI,CAACE,IAAL,CAAUH,CAAC,CAACI,MAAF,CAASC,IAAnB,IAA2BL,CAAC,CAACI,MAAF,CAASE,KAApC;;AACA,YAAKC,QAAL,CAAc;AAAEN,QAAAA,IAAI,EAAJA;AAAF,OAAd;AACD,KAzGkB;;AAAA,UA2GnBO,mBA3GmB,GA2GG,UAACR,CAAD,EAAO;AAAA,UACrBC,IADqB,GACZ,MAAKC,KADO,CACrBD,IADqB;AAE3BA,MAAAA,IAAI,CAACE,IAAL,CAAUM,kBAAV,CAA6BT,CAAC,CAACI,MAAF,CAASC,IAAtC,IAA8CL,CAAC,CAACI,MAAF,CAASE,KAAvD;;AACA,YAAKC,QAAL,CAAc;AAAEN,QAAAA,IAAI,EAAJA;AAAF,OAAd;AACD,KA/GkB;;AAAA,UAiHnBS,YAjHmB,GAiHJ,UAACV,CAAD,EAAO;AACpBA,MAAAA,CAAC,CAACW,cAAF;AADoB,UAEdV,IAFc,GAEL,MAAKC,KAFA,CAEdD,IAFc;AAGpBA,MAAAA,IAAI,CAACE,IAAL,CAAUM,kBAAV,CAA6BG,KAA7B,GAAqC,OAAKX,IAAI,CAACE,IAAL,CAAUM,kBAAV,CAA6BG,KAAvE;;AACE,YAAKC,IAAL,CAAUC,QAAV,CAAmBb,IAAnB,EACCc,IADD,CACM,UAAAC,MAAM,EAAI;AACd,YAAGA,MAAM,CAACC,MAAV,EAAiB;AACf,gBAAKV,QAAL,CAAc;AAACU,YAAAA,MAAM,EAAED,MAAM,CAACC;AAAhB,WAAd;AACD,SAFD,MAEK;AACH,gBAAKJ,IAAL,CAAUK,OAAV,CAAkBjB,IAAlB;;AACA,gBAAKH,KAAL,CAAWqB,OAAX;AACD;AACF,OARD;AASH,KA9HkB;;AAAA,UAgInBC,qBAhImB,GAgIK,UAACC,IAAD,EAAU;AAAA,UAC1BpB,IAD0B,GACjB,MAAKC,KADY,CAC1BD,IAD0B;;AAEhC,cAAOoB,IAAP;AACE,aAAK,MAAL;AACEpB,UAAAA,IAAI,CAACE,IAAL,CAAUM,kBAAV,CAA6Ba,UAA7B,GAA0C,CAACrB,IAAI,CAACE,IAAL,CAAUM,kBAAV,CAA6Ba,UAAxE;AACF;;AACA,aAAK,KAAL;AACErB,UAAAA,IAAI,CAACE,IAAL,CAAUM,kBAAV,CAA6Bc,SAA7B,GAAyC,CAACtB,IAAI,CAACE,IAAL,CAAUM,kBAAV,CAA6Bc,SAAvE;AACF;;AACA,aAAK,KAAL;AACEtB,UAAAA,IAAI,CAACE,IAAL,CAAUM,kBAAV,CAA6Be,SAA7B,GAAyC,CAACvB,IAAI,CAACE,IAAL,CAAUM,kBAAV,CAA6Be,SAAvE;AARJ;;AAUA,YAAKjB,QAAL,CAAe;AACbN,QAAAA,IAAI,EAAEA;AADO,OAAf;AAGD,KA/IkB;;AAAA,UAiJnBwB,OAjJmB,GAiJT,YAAM;AAAA,wBACkC,MAAKvB,KADvC;AAAA,UACNwB,KADM,eACNA,KADM;AAAA,UACCC,QADD,eACCA,QADD;AAAA,UACWlB,kBADX,eACWA,kBADX;AAEd,aACEiB,KAAK,KAAK,qBAAV,IACAC,QAAQ,KAAK,CADb,IACkBA,QAAQ,GAAG,CAD7B,IAEAlB,kBAAkB,CAACmB,UAAnB,KAAkC,EAFlC,IAGAnB,kBAAkB,CAACoB,SAAnB,KAAiC,EAHjC,IAIApB,kBAAkB,CAACG,KAAnB,KAA6B,8FAL/B;AAOD,KA1JkB;;AAEjB,UAAKC,IAAL,GAAW,IAAIxB,WAAJ,EAAX;AACA,UAAKa,KAAL,GAAa;AACXe,MAAAA,MAAM,EAAE,EADG;AAEXhB,MAAAA,IAAI,EAAE;AACJE,QAAAA,IAAI,EAAE;AACJuB,UAAAA,KAAK,EAAE,EADH;AAEJC,UAAAA,QAAQ,EAAE,EAFN;AAGJlB,UAAAA,kBAAkB,EAAE;AAClBmB,YAAAA,UAAU,EAAE,EADM;AAElBC,YAAAA,SAAS,EAAE,EAFO;AAGlBjB,YAAAA,KAAK,EAAE,EAHW;AAIlBU,YAAAA,UAAU,EAAE,KAJM;AAKlBC,YAAAA,SAAS,EAAE,KALO;AAMlBC,YAAAA,SAAS,EAAE;AANO;AAHhB;AADF;AAFK,KAAb;AAHiB;AAoBlB;;;;6BACQ;AAAA;;AACPM,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK7B,KAAjB;AADO,kCAEuC,KAAKA,KAAL,CAAWD,IAAX,CAAgBE,IAFvD;AAAA,UAEDuB,KAFC,yBAEDA,KAFC;AAAA,UAEMC,QAFN,yBAEMA,QAFN;AAAA,UAEgBlB,kBAFhB,yBAEgBA,kBAFhB;AAGP,UAAIuB,SAAS,GAAE,EAAf;;AACA,UAAGC,MAAM,CAACC,IAAP,CAAY,KAAKhC,KAAL,CAAWe,MAAvB,EAA+BkB,MAA/B,GAAwC,CAA3C,EAA6C;AAC3CF,QAAAA,MAAM,CAACG,OAAP,CAAe,KAAKlC,KAAL,CAAWe,MAA1B,EAAkCoB,OAAlC,CAA0C,UAAAC,KAAK,EAAI;AACjD,cAAIC,GAAG,GAAGD,KAAK,CAAC,CAAD,CAAf;AACA,cAAIhC,KAAK,GAAGgC,KAAK,CAAC,CAAD,CAAjB;AACAN,UAAAA,SAAS,CAACQ,IAAV,WAAkBD,GAAlB,cAAyBjC,KAAzB;AACD,SAJD;AAKD;;AACD,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAIE;AAAI,QAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG0B,SAAS,CAAC,CAAD,CADZ,CAJF,EAOE,oBAAC,IAAD;AAAM,QAAA,UAAU,MAAhB;AAAiB,QAAA,QAAQ,EAAE,KAAKtB,YAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAC,qBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,cAAc,EAAEf,YAArB;AAAmC,QAAA,EAAE,EAAE,CAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAIE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,EAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AAAa,QAAA,QAAQ,EAAE,KAAKI,gBAA5B;AAA8C,QAAA,IAAI,EAAC,OAAnD;AAA2D,QAAA,KAAK,EAAE2B,KAAlE;AAAyE,QAAA,IAAI,EAAC,OAA9E;AAAsF,QAAA,WAAW,EAAC,OAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAJF,CADF,EASE,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAC,wBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,cAAc,EAAE/B,YAArB;AAAmC,QAAA,EAAE,EAAE,CAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAIE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,EAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AAAa,QAAA,QAAQ,EAAE,KAAKI,gBAA5B;AAA8C,QAAA,IAAI,EAAC,UAAnD;AAA8D,QAAA,KAAK,EAAE4B,QAArE;AAA+E,QAAA,IAAI,EAAC,UAApF;AAA+F,QAAA,WAAW,EAAC,UAA3G;AAAsH,QAAA,QAAQ,MAA9H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAJF,CATF,EAiBE,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAC,yBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,cAAc,EAAEhC,YAArB;AAAmC,QAAA,EAAE,EAAE,CAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,EAIE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,EAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AAAa,QAAA,QAAQ,EAAE,KAAKa,mBAA5B;AAAiD,QAAA,IAAI,EAAC,YAAtD;AAAmE,QAAA,KAAK,EAAEC,kBAAkB,CAACmB,UAA7F;AAAyG,QAAA,IAAI,EAAC,WAA9G;AAA0H,QAAA,WAAW,EAAC,YAAtI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAJF,CAjBF,EAyBE,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAC,wBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,cAAc,EAAEjC,YAArB;AAAmC,QAAA,EAAE,EAAE,CAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAIE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,EAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AAAa,QAAA,QAAQ,EAAE,KAAKa,mBAA5B;AAAiD,QAAA,IAAI,EAAC,WAAtD;AAAkE,QAAA,KAAK,EAAEC,kBAAkB,CAACoB,SAA5F;AAAuG,QAAA,IAAI,EAAC,UAA5G;AAAuH,QAAA,WAAW,EAAC,WAAnI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAJF,CAzBF,EAiCE,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAC,qBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,cAAc,EAAElC,YAArB;AAAmC,QAAA,EAAE,EAAE,CAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAIE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,EAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AAAa,QAAA,QAAQ,EAAE,KAAKa,mBAA5B;AAAiD,QAAA,IAAI,EAAC,OAAtD;AAA8D,QAAA,KAAK,EAAEC,kBAAkB,CAACG,KAAxF;AAA+F,QAAA,IAAI,EAAC,OAApG;AAA4G,QAAA,WAAW,EAAC,cAAxH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAJF,CAjCF,EAyCE,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAC,WAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CADF,EAIE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,QAAD;AAAU,QAAA,QAAQ,EAAE;AAAA,iBAAM,MAAI,CAACQ,qBAAL,CAA2B,MAA3B,CAAN;AAAA,SAApB;AAA8D,QAAA,MAAM,MAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE,oBAAC,QAAD;AAAU,QAAA,QAAQ,EAAE;AAAA,iBAAM,MAAI,CAACA,qBAAL,CAA2B,KAA3B,CAAN;AAAA,SAApB;AAA6D,QAAA,MAAM,MAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAFF,EAGE,oBAAC,QAAD;AAAU,QAAA,QAAQ,EAAE;AAAA,iBAAM,MAAI,CAACA,qBAAL,CAA2B,KAA3B,CAAN;AAAA,SAApB;AAA6D,QAAA,MAAM,MAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAHF,CAJF,CAzCF,EAmDE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,QAAQ,EAAE,CAAf;AAAkB,QAAA,EAAE,EAAE,EAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAS,QAAA,IAAI,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CADF,CAnDF,CAPF,CADF;AAmED;;;;EApGwBhC,S;;AA8J3B,eAAeS,YAAf","sourcesContent":["import React, { Component } from 'react';\nimport AuthService from '../services'\nimport { Form, FormGroup, Col, FormControl, Button, ControlLabel, Checkbox } from 'react-bootstrap';\n\nclass Registration extends Component {\n  constructor(props) {\n    super(props)\n    this.auth= new AuthService()\n    this.state = {\n      errors: {},\n      form: {\n        user: {\n          email: '',\n          password: '',\n          profile_attributes: {\n            first_name: '',\n            last_name: '',\n            phone: '',\n            home_owner: false,\n            car_owner: false,\n            pet_owner: false,\n          }\n        }\n      }\n    }\n  }\n  render() {\n    console.log(this.state);\n    let { email, password, profile_attributes } = this.state.form.user\n    let errorMsgs =[]\n    if(Object.keys(this.state.errors).length > 0){\n      Object.entries(this.state.errors).forEach(entry => {\n        let key = entry[0]\n        let value = entry[1]\n        errorMsgs.push(`${key} ${value}.`)\n      })\n    }\n    return (\n      <div>\n        <h1 className=\"greeting\">\n        Register:\n        </h1>\n        <h3 className=\"errors\">\n          {errorMsgs[0]}\n        </h3>\n        <Form horizontal onSubmit={this.handleSubmit}>\n          <FormGroup controlId=\"formHorizontalEmail\">\n            <Col componentClass={ControlLabel} sm={2}>\n              Email:\n            </Col>\n            <Col sm={10}>\n              <FormControl onChange={this.handleUserChange} name=\"email\" value={email} type=\"email\" placeholder=\"Email\"/>\n            </Col>\n          </FormGroup>\n          <FormGroup controlId=\"formHorizontalPassword\">\n            <Col componentClass={ControlLabel} sm={2}>\n              Password:\n            </Col>\n            <Col sm={10}>\n              <FormControl onChange={this.handleUserChange} name=\"password\" value={password} type=\"password\" placeholder=\"Password\" required/>\n            </Col>\n          </FormGroup>\n          <FormGroup controlId=\"formHorizontalFirstName\">\n            <Col componentClass={ControlLabel} sm={2}>\n              First Name:\n            </Col>\n            <Col sm={10}>\n              <FormControl onChange={this.handleProfileChange} name=\"first_name\" value={profile_attributes.first_name} type=\"FirstName\" placeholder=\"First Name\" />\n            </Col>\n          </FormGroup>\n          <FormGroup controlId=\"formHorizontalLastName\">\n            <Col componentClass={ControlLabel} sm={2}>\n              Last Name:\n            </Col>\n            <Col sm={10}>\n              <FormControl onChange={this.handleProfileChange} name=\"last_name\" value={profile_attributes.last_name} type=\"LastName\" placeholder=\"Last Name\" />\n            </Col>\n          </FormGroup>\n          <FormGroup controlId=\"formHorizontalPhone\">\n            <Col componentClass={ControlLabel} sm={2}>\n              Phone:\n            </Col>\n            <Col sm={10}>\n              <FormControl onChange={this.handleProfileChange} name=\"phone\" value={profile_attributes.phone} type=\"phone\" placeholder=\"555-555-5555\" />\n            </Col>\n          </FormGroup>\n          <FormGroup className=\"ownership\">\n            <Col>\n              I have a (check all that apply)...\n            </Col>\n            <Col>\n              <Checkbox onChange={() => this.handleOwnershipChoice(\"home\")} inline>Home</Checkbox>\n              <Checkbox onChange={() => this.handleOwnershipChoice(\"car\")} inline>Car</Checkbox>\n              <Checkbox onChange={() => this.handleOwnershipChoice(\"pet\")} inline>Pet</Checkbox>\n            </Col>\n          </FormGroup>\n          <FormGroup>\n            <Col smOffset={2} sm={10}>\n              <Button  type=\"submit\">Register</Button>\n            </Col>\n          </FormGroup>\n        </Form>\n      </div>\n    )\n  }\n\n  handleUserChange = (e) => {\n    let { form } = this.state\n    form.user[e.target.name] = e.target.value\n    this.setState({ form })\n  }\n\n  handleProfileChange = (e) => {\n    let { form } = this.state\n    form.user.profile_attributes[e.target.name] = e.target.value\n    this.setState({ form })\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault()\n    let { form } = this.state\n    form.user.profile_attributes.phone = '+1'+form.user.profile_attributes.phone\n      this.auth.register(form)\n      .then(status => {\n        if(status.errors){\n          this.setState({errors: status.errors})\n        }else{\n          this.auth.sign_in(form)\n          this.props.refresh()\n        }\n      })\n  }\n\n  handleOwnershipChoice = (type) => {\n    let { form } = this.state\n    switch(type){\n      case \"home\":\n        form.user.profile_attributes.home_owner = !form.user.profile_attributes.home_owner\n      break\n      case \"car\":\n        form.user.profile_attributes.car_owner = !form.user.profile_attributes.car_owner\n      break\n      case \"pet\":\n        form.user.profile_attributes.pet_owner = !form.user.profile_attributes.pet_owner\n    }\n    this.setState ({\n      form: form\n    })\n  }\n\n  isValid = () => {\n    const { email, password, profile_attributes } = this.state\n    return(\n      email === /\\A[^@\\s]+@[^@\\s]+\\z/ &&\n      password !== 0 && password < 6 &&\n      profile_attributes.first_name !== \"\" &&\n      profile_attributes.last_name !== \"\" &&\n      profile_attributes.phone === /(^\\+[0-9]{2}|^\\+[0-9]{2}\\(0\\)|^\\(\\+[0-9]{2}\\)\\(0\\)|^00[0-9]{2}|^0)([0-9]{9}$|[0-9\\-\\s]{10}$)/\n    )\n  }\n}\n\nexport default Registration;\n"]},"metadata":{},"sourceType":"module"}